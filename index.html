<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Finance Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white py-6 px-4 shadow-lg">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <i class="fas fa-wallet text-3xl"></i>
                <h1 class="text-2xl font-bold">Finance Tracker</h1>
            </div>
            <div class="text-right">
                <p class="text-sm opacity-80">Current Balance</p>
                <p id="totalBalance" class="text-3xl font-bold">$0.00</p>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-4 md:p-6">
        <!-- Summary Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <div class="bg-white rounded-xl p-6 card-shadow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">Total Income</p>
                        <p id="totalIncome" class="text-2xl font-bold text-green-600">$0.00</p>
                    </div>
                    <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-arrow-up text-green-600"></i>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-xl p-6 card-shadow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">Total Expenses</p>
                        <p id="totalExpenses" class="text-2xl font-bold text-red-600">$0.00</p>
                    </div>
                    <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-arrow-down text-red-600"></i>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-xl p-6 card-shadow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">This Month</p>
                        <p id="monthlySpending" class="text-2xl font-bold text-purple-600">$0.00</p>
                    </div>
                    <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-calendar text-purple-600"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Left Column -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Add Transaction Form -->
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                        <i class="fas fa-plus-circle text-purple-600"></i>
                        Add Transaction
                    </h2>
                    <form id="transactionForm" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Type</label>
                                <select id="transactionType" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="expense">Expense</option>
                                    <option value="income">Income</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Amount</label>
                                <input type="number" id="amount" step="0.01" min="0" required placeholder="0.00" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                                <select id="category" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <optgroup label="Expenses">
                                        <option value="food">üçî Food & Dining</option>
                                        <option value="transport">üöó Transportation</option>
                                        <option value="shopping">üõçÔ∏è Shopping</option>
                                        <option value="bills">üìÑ Bills & Utilities</option>
                                        <option value="entertainment">üé¨ Entertainment</option>
                                        <option value="health">üíä Health</option>
                                        <option value="other">üì¶ Other</option>
                                    </optgroup>
                                    <optgroup label="Income">
                                        <option value="salary">üíº Salary</option>
                                        <option value="freelance">üíª Freelance</option>
                                        <option value="investment">üìà Investment</option>
                                        <option value="other-income">üí∞ Other Income</option>
                                    </optgroup>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
                                <input type="date" id="date" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                            <input type="text" id="description" placeholder="Enter description..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <button type="submit" class="w-full gradient-bg text-white py-3 rounded-lg font-semibold hover:opacity-90 transition-opacity">
                            <i class="fas fa-plus mr-2"></i>Add Transaction
                        </button>
                    </form>
                </div>

                <!-- Transaction History -->
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 gap-4">
                        <h2 class="text-xl font-bold flex items-center gap-2">
                            <i class="fas fa-history text-purple-600"></i>
                            Transaction History
                        </h2>
                        <div class="flex flex-wrap gap-2">
                            <select id="filterType" class="p-2 border border-gray-300 rounded-lg text-sm">
                                <option value="all">All Types</option>
                                <option value="income">Income</option>
                                <option value="expense">Expense</option>
                            </select>
                            <select id="filterCategory" class="p-2 border border-gray-300 rounded-lg text-sm">
                                <option value="all">All Categories</option>
                            </select>
                            <input type="month" id="filterMonth" class="p-2 border border-gray-300 rounded-lg text-sm">
                        </div>
                    </div>
                    <div id="transactionList" class="space-y-3 max-h-96 overflow-y-auto">
                        <p class="text-gray-500 text-center py-8">No transactions yet. Add your first transaction above!</p>
                    </div>
                </div>

                <!-- Monthly Trends -->
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                        <i class="fas fa-chart-line text-purple-600"></i>
                        Monthly Trends
                    </h2>
                    <div class="h-72">
                        <canvas id="trendsChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="space-y-6">
                <!-- Spending by Category -->
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                        <i class="fas fa-chart-pie text-purple-600"></i>
                        Spending Breakdown
                    </h2>
                    <div class="h-64">
                        <canvas id="categoryChart"></canvas>
                    </div>
                    <div id="categoryLegend" class="mt-4 space-y-2"></div>
                </div>

                <!-- Budget Limits -->
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold flex items-center gap-2">
                            <i class="fas fa-bullseye text-purple-600"></i>
                            Budget Limits
                        </h2>
                        <button id="addBudgetBtn" class="text-purple-600 hover:text-purple-800">
                            <i class="fas fa-plus-circle"></i>
                        </button>
                    </div>
                    <div id="budgetList" class="space-y-4">
                        <p class="text-gray-500 text-center py-4 text-sm">No budgets set. Click + to add one!</p>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                        <i class="fas fa-chart-bar text-purple-600"></i>
                        Quick Stats
                    </h2>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Avg. Daily Spending</span>
                            <span id="avgDaily" class="font-semibold">$0.00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Largest Expense</span>
                            <span id="largestExpense" class="font-semibold">$0.00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Total Transactions</span>
                            <span id="totalTransactions" class="font-semibold">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Budget Modal -->
    <div id="budgetModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4 fade-in">
            <h3 class="text-xl font-bold mb-4">Set Budget Limit</h3>
            <form id="budgetForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                    <select id="budgetCategory" class="w-full p-3 border border-gray-300 rounded-lg">
                        <option value="food">üçî Food & Dining</option>
                        <option value="transport">üöó Transportation</option>
                        <option value="shopping">üõçÔ∏è Shopping</option>
                        <option value="bills">üìÑ Bills & Utilities</option>
                        <option value="entertainment">üé¨ Entertainment</option>
                        <option value="health">üíä Health</option>
                        <option value="other">üì¶ Other</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Monthly Limit</label>
                    <input type="number" id="budgetAmount" step="0.01" min="0" required placeholder="0.00" class="w-full p-3 border border-gray-300 rounded-lg">
                </div>
                <div class="flex gap-3">
                    <button type="button" id="cancelBudget" class="flex-1 py-3 border border-gray-300 rounded-lg font-semibold hover:bg-gray-50">Cancel</button>
                    <button type="submit" class="flex-1 gradient-bg text-white py-3 rounded-lg font-semibold hover:opacity-90">Save Budget</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Data Management
        let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
        let budgets = JSON.parse(localStorage.getItem('budgets')) || [];

        // Category Configuration
        const categories = {
            food: { name: 'Food & Dining', emoji: 'üçî', color: '#FF6384' },
            transport: { name: 'Transportation', emoji: 'üöó', color: '#36A2EB' },
            shopping: { name: 'Shopping', emoji: 'üõçÔ∏è', color: '#FFCE56' },
            bills: { name: 'Bills & Utilities', emoji: 'üìÑ', color: '#4BC0C0' },
            entertainment: { name: 'Entertainment', emoji: 'üé¨', color: '#9966FF' },
            health: { name: 'Health', emoji: 'üíä', color: '#FF9F40' },
            other: { name: 'Other', emoji: 'üì¶', color: '#C9CBCF' },
            salary: { name: 'Salary', emoji: 'üíº', color: '#4CAF50' },
            freelance: { name: 'Freelance', emoji: 'üíª', color: '#8BC34A' },
            investment: { name: 'Investment', emoji: 'üìà', color: '#CDDC39' },
            'other-income': { name: 'Other Income', emoji: 'üí∞', color: '#00BCD4' }
        };

        // Chart instances
        let categoryChart, trendsChart;

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
        });

        function initializeApp() {
            setDefaultDate();
            populateFilterCategories();
            renderAll();
            setupEventListeners();
        }

        function setDefaultDate() {
            document.getElementById('date').valueAsDate = new Date();
            document.getElementById('filterMonth').value = new Date().toISOString().slice(0, 7);
        }

        function populateFilterCategories() {
            const select = document.getElementById('filterCategory');
            select.innerHTML = '<option value="all">All Categories</option>';
            Object.entries(categories).forEach(([key, cat]) => {
                select.innerHTML += `<option value="${key}">${cat.emoji} ${cat.name}</option>`;
            });
        }

        function setupEventListeners() {
            // Transaction form
            document.getElementById('transactionForm').addEventListener('submit', addTransaction);
            
            // Filters
            document.getElementById('filterType').addEventListener('change', renderTransactions);
            document.getElementById('filterCategory').addEventListener('change', renderTransactions);
            document.getElementById('filterMonth').addEventListener('change', renderTransactions);

            // Budget modal
            document.getElementById('addBudgetBtn').addEventListener('click', () => {
                document.getElementById('budgetModal').classList.remove('hidden');
                document.getElementById('budgetModal').classList.add('flex');
            });
            document.getElementById('cancelBudget').addEventListener('click', closeBudgetModal);
            document.getElementById('budgetForm').addEventListener('submit', addBudget);
            document.getElementById('budgetModal').addEventListener('click', (e) => {
                if (e.target === document.getElementById('budgetModal')) closeBudgetModal();
            });
        }

        function closeBudgetModal() {
            document.getElementById('budgetModal').classList.add('hidden');
            document.getElementById('budgetModal').classList.remove('flex');
        }

        function addTransaction(e) {
            e.preventDefault();
            
            const transaction = {
                id: Date.now(),
                type: document.getElementById('transactionType').value,
                amount: parseFloat(document.getElementById('amount').value),
                category: document.getElementById('category').value,
                date: document.getElementById('date').value,
                description: document.getElementById('description').value || categories[document.getElementById('category').value].name
            };

            transactions.unshift(transaction);
            saveData();
            renderAll();
            e.target.reset();
            setDefaultDate();
        }

        function deleteTransaction(id) {
            transactions = transactions.filter(t => t.id !== id);
            saveData();
            renderAll();
        }

        function addBudget(e) {
            e.preventDefault();
            
            const category = document.getElementById('budgetCategory').value;
            const amount = parseFloat(document.getElementById('budgetAmount').value);

            // Update existing or add new
            const existingIndex = budgets.findIndex(b => b.category === category);
            if (existingIndex >= 0) {
                budgets[existingIndex].amount = amount;
            } else {
                budgets.push({ category, amount });
            }

            saveData();
            renderBudgets();
            closeBudgetModal();
            document.getElementById('budgetForm').reset();
        }

        function deleteBudget(category) {
            budgets = budgets.filter(b => b.category !== category);
            saveData();
            renderBudgets();
        }

        function saveData() {
            localStorage.setItem('transactions', JSON.stringify(transactions));
            localStorage.setItem('budgets', JSON.stringify(budgets));
        }

        function renderAll() {
            renderSummary();
            renderTransactions();
            renderCategoryChart();
            renderTrendsChart();
            renderBudgets();
            renderQuickStats();
        }

        function renderSummary() {
            const income = transactions.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);
            const expenses = transactions.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);
            const balance = income - expenses;

            const currentMonth = new Date().toISOString().slice(0, 7);
            const monthlyExpenses = transactions
                .filter(t => t.type === 'expense' && t.date.startsWith(currentMonth))
                .reduce((sum, t) => sum + t.amount, 0);

            document.getElementById('totalIncome').textContent = formatCurrency(income);
            document.getElementById('totalExpenses').textContent = formatCurrency(expenses);
            document.getElementById('totalBalance').textContent = formatCurrency(balance);
            document.getElementById('monthlySpending').textContent = formatCurrency(monthlyExpenses);
        }

        function renderTransactions() {
            const filterType = document.getElementById('filterType').value;
            const filterCategory = document.getElementById('filterCategory').value;
            const filterMonth = document.getElementById('filterMonth').value;

            let filtered = transactions.filter(t => {
                if (filterType !== 'all' && t.type !== filterType) return false;
                if (filterCategory !== 'all' && t.category !== filterCategory) return false;
                if (filterMonth && !t.date.startsWith(filterMonth)) return false;
                return true;
            });

            const container = document.getElementById('transactionList');
            
            if (filtered.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">No transactions found.</p>';
                return;
            }

            container.innerHTML = filtered.map(t => {
                const cat = categories[t.category];
                const isExpense = t.type === 'expense';
                return `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors fade-in">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full flex items-center justify-center text-xl" style="background-color: ${cat.color}20">
                                ${cat.emoji}
                            </div>
                            <div>
                                <p class="font-medium">${t.description}</p>
                                <p class="text-sm text-gray-500">${cat.name} ‚Ä¢ ${formatDate(t.date)}</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="font-bold ${isExpense ? 'text-red-600' : 'text-green-600'}">
                                ${isExpense ? '-' : '+'}${formatCurrency(t.amount)}
                            </span>
                            <button onclick="deleteTransaction(${t.id})" class="text-gray-400 hover:text-red-500 transition-colors">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderCategoryChart() {
            const currentMonth = new Date().toISOString().slice(0, 7);
            const expensesByCategory = {};

            transactions
                .filter(t => t.type === 'expense' && t.date.startsWith(currentMonth))
                .forEach(t => {
                    expensesByCategory[t.category] = (expensesByCategory[t.category] || 0) + t.amount;
                });

            const labels = Object.keys(expensesByCategory).map(k => categories[k].name);
            const data = Object.values(expensesByCategory);
            const colors = Object.keys(expensesByCategory).map(k => categories[k].color);

            const ctx = document.getElementById('categoryChart').getContext('2d');
            
            if (categoryChart) categoryChart.destroy();

            if (data.length === 0) {
                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                ctx.font = '14px sans-serif';
                ctx.fillStyle = '#9CA3AF';
                ctx.textAlign = 'center';
                ctx.fillText('No expense data this month', ctx.canvas.width / 2, ctx.canvas.height / 2);
                document.getElementById('categoryLegend').innerHTML = '';
                return;
            }

            categoryChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels,
                    datasets: [{
                        data,
                        backgroundColor: colors,
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    }
                }
            });

            // Custom legend
            const total = data.reduce((a, b) => a + b, 0);
            document.getElementById('categoryLegend').innerHTML = Object.entries(expensesByCategory)
                .sort((a, b) => b[1] - a[1])
                .map(([key, value]) => {
                    const cat = categories[key];
                    const percentage = ((value / total) * 100).toFixed(1);
                    return `
                        <div class="flex items-center justify-between text-sm">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 rounded-full" style="background-color: ${cat.color}"></div>
                                <span>${cat.emoji} ${cat.name}</span>
                            </div>
                            <span class="font-medium">${formatCurrency(value)} (${percentage}%)</span>
                        </div>
                    `;
                }).join('');
        }

        function renderTrendsChart() {
            const months = [];
            const incomeData = [];
            const expenseData = [];

            // Get last 6 months
            for (let i = 5; i >= 0; i--) {
                const date = new Date();
                date.setMonth(date.getMonth() - i);
                const monthKey = date.toISOString().slice(0, 7);
                months.push(date.toLocaleDateString('en-US', { month: 'short' }));

                const monthIncome = transactions
                    .filter(t => t.type === 'income' && t.date.startsWith(monthKey))
                    .reduce((sum, t) => sum + t.amount, 0);
                const monthExpenses = transactions
                    .filter(t => t.type === 'expense' && t.date.startsWith(monthKey))
                    .reduce((sum, t) => sum + t.amount, 0);

                incomeData.push(monthIncome);
                expenseData.push(monthExpenses);
            }

            const ctx = document.getElementById('trendsChart').getContext('2d');
            
            if (trendsChart) trendsChart.destroy();

            trendsChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: months,
                    datasets: [
                        {
                            label: 'Income',
                            data: incomeData,
                            backgroundColor: '#4CAF50',
                            borderRadius: 8
                        },
                        {
                            label: 'Expenses',
                            data: expenseData,
                            backgroundColor: '#FF6384',
                            borderRadius: 8
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: { usePointStyle: true, padding: 20 }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: value => '$' + value.toLocaleString()
                            }
                        }
                    }
                }
            });
        }

        function renderBudgets() {
            const container = document.getElementById('budgetList');
            const currentMonth = new Date().toISOString().slice(0, 7);

            if (budgets.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-4 text-sm">No budgets set. Click + to add one!</p>';
                return;
            }

            container.innerHTML = budgets.map(budget => {
                const cat = categories[budget.category];
                const spent = transactions
                    .filter(t => t.type === 'expense' && t.category === budget.category && t.date.startsWith(currentMonth))
                    .reduce((sum, t) => sum + t.amount, 0);
                
                const percentage = Math.min((spent / budget.amount) * 100, 100);
                const isOver = spent > budget.amount;

                return `
                    <div class="fade-in">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium">${cat.emoji} ${cat.name}</span>
                            <button onclick="deleteBudget('${budget.category}')" class="text-gray-400 hover:text-red-500">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="flex justify-between text-sm mb-1">
                            <span class="${isOver ? 'text-red-600 font-semibold' : 'text-gray-600'}">${formatCurrency(spent)}</span>
                            <span class="text-gray-500">of ${formatCurrency(budget.amount)}</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div class="progress-bar h-3 rounded-full ${isOver ? 'bg-red-500' : percentage > 80 ? 'bg-yellow-500' : 'bg-green-500'}" 
                                 style="width: ${percentage}%"></div>
                        </div>
                        ${isOver ? '<p class="text-red-500 text-xs mt-1">‚ö†Ô∏è Budget exceeded!</p>' : ''}
                    </div>
                `;
            }).join('');
        }

        function renderQuickStats() {
            const expenses = transactions.filter(t => t.type === 'expense');
            
            // Average daily spending (this month)
            const currentMonth = new Date().toISOString().slice(0, 7);
            const thisMonthExpenses = expenses.filter(t => t.date.startsWith(currentMonth));
            const daysInMonth = new Date().getDate();
            const avgDaily = thisMonthExpenses.reduce((sum, t) => sum + t.amount, 0) / daysInMonth;

            // Largest expense
            const largestExpense = expenses.length > 0 ? Math.max(...expenses.map(t => t.amount)) : 0;

            document.getElementById('avgDaily').textContent = formatCurrency(avgDaily);
            document.getElementById('largestExpense').textContent = formatCurrency(largestExpense);
            document.getElementById('totalTransactions').textContent = transactions.length;
        }

        // Utility functions
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD'
            }).format(amount);
        }

        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('en-US', {
                month: 'short',
                day: 'numeric',
                year: 'numeric'
            });
        }
    </script>
</body>
</html>
